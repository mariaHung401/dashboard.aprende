{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbook/Desktop/a.micole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/macbook/Desktop/a.micole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/macbook/Desktop/a.micole/client/src/views/ReactTables.js\";\nimport React from \"react\"; // reactstrap components\n\nimport { Button, Card, CardHeader, CardBody, CardTitle, Row, Col } from \"reactstrap\";\nimport * as mainActions from \"../actions/mainActions\";\nimport { connect } from 'react-redux'; // core components\n\nimport ReactTable from \"components/ReactTable/ReactTable.js\";\nimport ReactBSAlert from \"react-bootstrap-sweetalert\";\n\nclass ReactTables extends React.Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.ponerModalconCaja = (codigoweb, alumno) => {\n      const texto = \"Esta seguro de hacer el bloqueo?\";\n      this.setState({\n        modal: /*#__PURE__*/React.createElement(ReactBSAlert, {\n          warning: true,\n          showCancel: true,\n          confirmBtnText: \"Si, Bloquea!\",\n          confirmBtnBsStyle: \"danger\",\n          title: alumno,\n          onConfirm: () => this.bloquearAlumno(codigoweb),\n          onCancel: () => this.setState({\n            modal: null\n          }),\n          focusCancelBtn: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 9\n          }\n        }, texto)\n      });\n    };\n\n    this.activarAlumno = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(objectId) {\n        var url, data, respuesta, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              url = \"https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/activarAlumno\";\n              data = {\n                codigocolegio: _this.state.codcolegio,\n                codigo: objectId\n              };\n              _context.next = 4;\n              return fetch(url, {\n                method: 'POST',\n                body: JSON.stringify(data),\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                Accept: 'application/json'\n              }).catch(error => {\n                console.log(error);\n              });\n\n            case 4:\n              respuesta = _context.sent;\n              _context.next = 7;\n              return respuesta.json();\n\n            case 7:\n              result = _context.sent;\n              alert(\"Alumno Reactivado con exito\");\n              _context.next = 11;\n              return _this.ir();\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.bloquearAlumno = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(codigoweb) {\n        var url, data, respuesta, result;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              url = \"https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/bloquearAlumno\";\n              data = {\n                codigo: codigoweb\n              };\n              _context2.next = 4;\n              return fetch(url, {\n                method: 'POST',\n                body: JSON.stringify(data),\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                Accept: 'application/json'\n              }).catch(error => {\n                console.log(error);\n              });\n\n            case 4:\n              respuesta = _context2.sent;\n              _context2.next = 7;\n              return respuesta.json();\n\n            case 7:\n              result = _context2.sent;\n              _context2.next = 10;\n              return _this.ir();\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    this.ir = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var table;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            table = _this.props.alumnos.map((prop, key) => {\n              return {\n                id: prop._id,\n                nombre: prop.nombre,\n                apellido: prop.apellido,\n                grado: prop.grado,\n                codigo: prop.codigo,\n                actions:\n                /*#__PURE__*/\n                // we've added some custom button actions\n                React.createElement(\"div\", {\n                  className: \"actions-right\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 11\n                  }\n                }, /*#__PURE__*/React.createElement(Button, {\n                  onClick: () => {\n                    let obj = _this.state.data.find(o => o.id === key);\n\n                    alert(\"You've clicked LIKE button on \\n{ \\nName: \" + obj.name + \", \\nposition: \" + obj.position + \", \\noffice: \" + obj.office + \", \\nage: \" + obj.age + \"\\n}.\");\n                  },\n                  color: \"info\",\n                  size: \"sm\",\n                  className: \"btn-icon btn-link like\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 13\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-heart\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 15\n                  }\n                })), \" \", /*#__PURE__*/React.createElement(Button, {\n                  color: \"warning\",\n                  size: \"sm\",\n                  className: \"btn-icon btn-link edit\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 13\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-edit\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 15\n                  }\n                })), \" \", prop.codigo == \"------\" ? /*#__PURE__*/React.createElement(Button, {\n                  onClick: () => {\n                    _this.activarAlumno(prop._id);\n                  },\n                  color: \"success\",\n                  size: \"sm\",\n                  className: \"btn-icon btn-link like\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 17\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-heart\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 17\n                  }\n                })) : /*#__PURE__*/React.createElement(Button, {\n                  onClick: () => {\n                    _this.ponerModalconCaja(prop.codigo, prop.nombre);\n                  },\n                  color: \"danger\",\n                  size: \"sm\",\n                  className: \"btn-icon btn-link remove\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 17\n                  }\n                }, /*#__PURE__*/React.createElement(\"i\", {\n                  className: \"fa fa-times\",\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 17\n                  }\n                })))\n              };\n            });\n\n            _this.setState({\n              data: table\n            });\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    this.state = {\n      data: [],\n      modal: null,\n      codcolegio: null\n    };\n  }\n\n  componentDidMount() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _this2.ir();\n\n          case 2:\n            _this2.props.verColegio();\n\n            if (!_this2.props.colegio.id) {\n              _this2.props.history.push(\"/auth/login\");\n            }\n\n            _this2.setState({\n              codcolegio: _this2.props.colegio.codigo\n            });\n\n            console.log(_this2.state.codcolegio);\n            console.log(_this2.props.colegio.codigo);\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }))();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }, this.state.modal, /*#__PURE__*/React.createElement(Col, {\n      md: \"12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CardTitle, {\n      tag: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, \"Alumnos\")), /*#__PURE__*/React.createElement(CardBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ReactTable, {\n      data: this.state.data,\n      columns: [{\n        Header: \"Nombre\",\n        accessor: \"nombre\"\n      }, {\n        Header: \"Apellido\",\n        accessor: \"apellido\"\n      }, {\n        Header: \"Grado\",\n        accessor: \"grado\"\n      }, {\n        Header: \"Codigo\",\n        accessor: \"codigo\"\n      }, {\n        Header: \"Acciones\",\n        accessor: \"actions\",\n        sortable: false,\n        filterable: false\n      }],\n      className: \"-striped -highlight primary-pagination\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = reducers => {\n  return reducers.mainReducer;\n};\n\nexport default connect(mapStateToProps, mainActions)(ReactTables);","map":{"version":3,"sources":["/Users/macbook/Desktop/a.micole/client/src/views/ReactTables.js"],"names":["React","Button","Card","CardHeader","CardBody","CardTitle","Row","Col","mainActions","connect","ReactTable","ReactBSAlert","ReactTables","Component","constructor","props","ponerModalconCaja","codigoweb","alumno","texto","setState","modal","bloquearAlumno","activarAlumno","objectId","url","data","codigocolegio","state","codcolegio","codigo","fetch","method","body","JSON","stringify","headers","Accept","catch","error","console","log","respuesta","json","result","alert","ir","table","alumnos","map","prop","key","id","_id","nombre","apellido","grado","actions","obj","find","o","name","position","office","age","componentDidMount","verColegio","colegio","history","push","render","Header","accessor","sortable","filterable","mapStateToProps","reducers","mainReducer"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\n\n// reactstrap components\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport * as mainActions from \"../actions/mainActions\";\nimport { connect } from 'react-redux';\n// core components\nimport ReactTable from \"components/ReactTable/ReactTable.js\";\nimport ReactBSAlert from \"react-bootstrap-sweetalert\";\n\n\nclass ReactTables extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      modal: null,\n      codcolegio:null\n    };\n  }\n\n  async componentDidMount() {\n    await this.ir();\n    this.props.verColegio();\n    if(!this.props.colegio.id){\n      this.props.history.push(\"/auth/login\");\n    }\n    this.setState({codcolegio:this.props.colegio.codigo});\n    console.log(this.state.codcolegio)\n    console.log(this.props.colegio.codigo)\n  }\n\n  ponerModalconCaja = (codigoweb, alumno) => {\n    const texto = \"Esta seguro de hacer el bloqueo?\"\n    this.setState({\n      modal: (\n        <ReactBSAlert\n          warning\n          showCancel\n          confirmBtnText=\"Si, Bloquea!\"\n          confirmBtnBsStyle=\"danger\"\n          title={alumno}\n          onConfirm={() => this.bloquearAlumno(codigoweb)}\n          onCancel={() => this.setState({modal:null})}\n          focusCancelBtn\n        >\n          {texto}\n        </ReactBSAlert>\n      )\n    });\n  }\n\n  activarAlumno = async (objectId) => {\n    let url = \"https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/activarAlumno\"\n    const data = {\n      codigocolegio:this.state.codcolegio,\n      codigo:objectId\n    };\n    let respuesta = await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers:{\n          'Content-Type': 'application/json'\n      },\n      Accept: 'application/json',\n    })\n    .catch(error => {\n        console.log(error);\n    });\n    let result = await respuesta.json();\n    alert(\"Alumno Reactivado con exito\");\n    await this.ir();\n  }\n\n  bloquearAlumno = async (codigoweb) => {\n    let url = \"https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/bloquearAlumno\"\n    const data = {\n      codigo:codigoweb\n    };\n    let respuesta = await fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers:{\n          'Content-Type': 'application/json'\n      },\n      Accept: 'application/json',\n    })\n    .catch(error => {\n        console.log(error);\n    });\n    let result = await respuesta.json();\n    await this.ir();\n  };\n\n  ir = async ()=>{\n    let table = this.props.alumnos.map((prop, key) => {\n      return {\n        id: prop._id,\n        nombre: prop.nombre,\n        apellido: prop.apellido,\n        grado: prop.grado,\n        codigo: prop.codigo,\n        actions: (\n          // we've added some custom button actions\n          <div className=\"actions-right\">\n            {/* use this button to add a like kind of action */}\n            <Button\n              onClick={() => {\n                let obj = this.state.data.find((o) => o.id === key);\n                alert(\n                  \"You've clicked LIKE button on \\n{ \\nName: \" +\n                    obj.name +\n                    \", \\nposition: \" +\n                    obj.position +\n                    \", \\noffice: \" +\n                    obj.office +\n                    \", \\nage: \" +\n                    obj.age +\n                    \"\\n}.\"\n                );\n              }}\n              color=\"info\"\n              size=\"sm\"\n              className=\"btn-icon btn-link like\"\n            >\n              <i className=\"fa fa-heart\" />\n            </Button>{\" \"}\n            {/* use this button to add a edit kind of action */}\n            <Button\n              color=\"warning\"\n              size=\"sm\"\n              className=\"btn-icon btn-link edit\"\n            >\n              <i className=\"fa fa-edit\" />\n            </Button>{\" \"}\n            {/* use this button to remove the data row */}\n            {prop.codigo==\"------\" ?\n              ( <Button\n                onClick={() => {\n                  this.activarAlumno(prop._id);\n                }}\n                color=\"success\"\n                size=\"sm\"\n                className=\"btn-icon btn-link like\"\n              >\n                <i className=\"fa fa-heart\" />\n              </Button>) : (\n                <Button\n                onClick={() => {\n                  this.ponerModalconCaja(prop.codigo, prop.nombre);\n                }}\n                color=\"danger\"\n                size=\"sm\"\n                className=\"btn-icon btn-link remove\"\n              >\n                <i className=\"fa fa-times\" />\n              </Button>\n              )}\n          </div>\n        ),\n      };\n    });\n    this.setState({data:table});\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"content\">\n          <Row>\n            {this.state.modal}\n            <Col md=\"12\">\n              <Card>\n                <CardHeader>\n                  <CardTitle tag=\"h4\">Alumnos</CardTitle>\n                </CardHeader>\n                <CardBody>\n                  <ReactTable\n                    data={this.state.data}\n                    columns={[\n                      {\n                        Header: \"Nombre\",\n                        accessor: \"nombre\",\n                      },\n                      {\n                        Header: \"Apellido\",\n                        accessor: \"apellido\",\n                      },\n                      {\n                        Header: \"Grado\",\n                        accessor: \"grado\",\n                      },\n                      {\n                        Header: \"Codigo\",\n                        accessor: \"codigo\",\n                      },\n                      {\n                        Header: \"Acciones\",\n                        accessor: \"actions\",\n                        sortable: false,\n                        filterable: false,\n                      },\n                    ]}\n                    className=\"-striped -highlight primary-pagination\"\n                  />\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (reducers) => {\n  return reducers.mainReducer;\n}\n\nexport default connect(mapStateToProps, mainActions )(ReactTables);\n"]},"metadata":{},"sourceType":"module"}