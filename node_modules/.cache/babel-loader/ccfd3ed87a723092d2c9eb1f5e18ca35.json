{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbook/Desktop/a.micole/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/macbook/Desktop/a.micole/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/macbook/Desktop/a.micole/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/macbook/Desktop/a.micole/src/views/pages/Chat.js\";\nimport React, { useRef, useState } from 'react';\nimport './Chat.css';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/analytics';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport { Link } from 'react-router-dom';\nfirebase.initializeApp({\n  apiKey: \"AIzaSyBoOsm-fVCE3CaINek5LurcRwIBOqu2-fs\",\n  authDomain: \"chatapp-d098c.firebaseapp.com\",\n  projectId: \"chatapp-d098c\",\n  storageBucket: \"chatapp-d098c.appspot.com\",\n  messagingSenderId: \"11098059960\",\n  appId: \"1:11098059960:web:1969239b37a32639cb304d\",\n  measurementId: \"G-V92L3S4D0N\"\n});\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\nconst analytics = firebase.analytics();\n\nfunction App() {\n  const _useAuthState = useAuthState(auth),\n        _useAuthState2 = _slicedToArray(_useAuthState, 1),\n        user = _useAuthState2[0];\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 21\n    }\n  }, \"Mensajes\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"admin/dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 25\n    }\n  }, \"Volver\")), /*#__PURE__*/React.createElement(SignOut, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, user ? /*#__PURE__*/React.createElement(ChatRoom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(SignIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 40\n    }\n  })));\n}\n\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-light\",\n    onClick: signInWithGoogle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Entra con Google\")));\n}\n\nfunction SignOut() {\n  return auth.currentUser && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-light\",\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Cerrar sesi\\xF3n\");\n}\n\nfunction ChatRoom() {\n  const dummy = useRef();\n  const messagesRef = firestore.collection('messages');\n  const query = messagesRef.orderBy('createdAt').limit(100);\n\n  const _useCollectionData = useCollectionData(query, {\n    idField: 'id'\n  }),\n        _useCollectionData2 = _slicedToArray(_useCollectionData, 1),\n        messages = _useCollectionData2[0];\n\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        formValue = _useState2[0],\n        setFormValue = _useState2[1];\n\n  const sendMessage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _auth$currentUser, uid, photoURL;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            _auth$currentUser = auth.currentUser, uid = _auth$currentUser.uid, photoURL = _auth$currentUser.photoURL;\n            _context.next = 4;\n            return messagesRef.add({\n              text: formValue,\n              createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n              uid,\n              photoURL\n            });\n\n          case 4:\n            setFormValue('');\n            dummy.current.scrollIntoView({\n              behavior: 'smooth'\n            });\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function sendMessage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, messages && messages.map(msg => /*#__PURE__*/React.createElement(ChatMessage, {\n    key: msg.id,\n    message: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 46\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    ref: dummy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form__send\",\n    onSubmit: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: formValue,\n    onChange: e => setFormValue(e.target.value),\n    placeholder: \"Escribe aqui\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: !formValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"\\uD83D\\uDD4Aenviar\")));\n}\n\nfunction ChatMessage(props) {\n  const _props$message = props.message,\n        text = _props$message.text,\n        uid = _props$message.uid,\n        photoURL = _props$message.photoURL;\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message \".concat(messageClass),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img__mail\",\n    src: photoURL || 'https://api.adorable.io/avatars/23/abott@adorable.png',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, text)));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/macbook/Desktop/a.micole/src/views/pages/Chat.js"],"names":["React","useRef","useState","firebase","useAuthState","useCollectionData","Link","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","analytics","App","user","SignIn","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","SignOut","currentUser","signOut","ChatRoom","dummy","messagesRef","collection","query","orderBy","limit","idField","messages","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","id","target","value","ChatMessage","props","message","messageClass"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport './Chat.css';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/analytics';\n\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport {Link} from 'react-router-dom';\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyBoOsm-fVCE3CaINek5LurcRwIBOqu2-fs\",\n    authDomain: \"chatapp-d098c.firebaseapp.com\",\n    projectId: \"chatapp-d098c\",\n    storageBucket: \"chatapp-d098c.appspot.com\",\n    messagingSenderId: \"11098059960\",\n    appId: \"1:11098059960:web:1969239b37a32639cb304d\",\n    measurementId: \"G-V92L3S4D0N\"\n})\n\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\nconst analytics = firebase.analytics();\n\n\nfunction App() {\n\nconst [user] = useAuthState(auth);\n\n    return (\n        <div className=\"App\">\n            <header>\n                <div className=\"logo\">\n                    <h4>Mensajes</h4>\n                </div>\n                <div className=\"header-right\">\n                    <button type=\"button\" class=\"btn btn-light\">\n                        <Link to=\"admin/dashboard\">Volver</Link>\n                    </button>\n                    <SignOut />\n                </div>\n            </header>\n\n            <section>\n                {user ? <ChatRoom /> : <SignIn />}\n            </section>\n\n        </div>\n    );\n}\n\nfunction SignIn() {\n    const signInWithGoogle = () => {\n        const provider = new firebase.auth.GoogleAuthProvider();\n        auth.signInWithPopup(provider);\n    }\n\n    return (\n        <>\n        <div>\n            <button type=\"button\" class=\"btn btn-light\" onClick={signInWithGoogle}>Entra con Google</button>\n\n        </div>\n        </>\n    )\n\n}\n\nfunction SignOut() {\n    return auth.currentUser && (\n        <button type=\"button\" class=\"btn btn-light\" onClick={() => auth.signOut()}>Cerrar sesión</button>\n    )\n}\n\n\nfunction ChatRoom() {\n    const dummy = useRef();\n    const messagesRef = firestore.collection('messages');\n    const query = messagesRef.orderBy('createdAt').limit(100);\n\n    const [messages] = useCollectionData(query, { idField: 'id' });\n\n    const [formValue, setFormValue] = useState('');\n\n\n    const sendMessage = async (e) => {\n        e.preventDefault();\n\n        const { uid, photoURL } = auth.currentUser;\n\n        await messagesRef.add({\n        text: formValue,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        uid,\n        photoURL\n        })\n\n        setFormValue('');\n        dummy.current.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    return (<>\n        <main>\n            {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n            <span ref={dummy}></span>\n        </main>\n\n        <form className=\"form__send\" onSubmit={sendMessage}>\n            <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"Escribe aqui\" />\n            <button type=\"submit\" disabled={!formValue}>🕊enviar</button>\n        </form>\n    </>)\n}\n\nfunction ChatMessage(props) {\n    const { text, uid, photoURL } = props.message;\n\n    const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n\n    return (\n    <>\n        <div className={`message ${messageClass}`}>\n            <img className=\"img__mail\" src={photoURL || 'https://api.adorable.io/avatars/23/abott@adorable.png'} />\n            <p>{text}</p>\n        </div>\n    </>\n    )\n}\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}