{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macbook/Desktop/a.micole_rebe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/macbook/Desktop/a.micole_rebe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";// react plugin used to create charts\nimport{Line,Bar,Doughnut}from\"react-chartjs-2\";import*as mainActions from\"../actions/mainActions\";import{connect}from'react-redux';// reactstrap components\nimport{Badge,Button,Card,CardHeader,CardBody,CardFooter,CardTitle,Label,FormGroup,Input,Table,Row,Col,UncontrolledTooltip}from\"reactstrap\";import ReactBSAlert from\"react-bootstrap-sweetalert\";import Select from\"react-select\";import ReactTable from\"components/ReactTable/ReactTable.js\";class Dashboard extends React.Component{constructor(props){var _this;super(props);_this=this;this.handleRefresh=()=>{// by calling this method react re-renders the component\nthis.verEnvios();console.log(\"Pagina Refrescada\");};this.ponerGrados=()=>{//this.setState({grados:this.props.grados});\n};this.setGrado_tareas_activas=value=>{if(value!=undefined){this.setState({asignatura_tareas_activas:value});if(value.value>6){this.setState({materias_tareas_activas:this.props.Secundaria});}else{this.setState({materias_tareas_activas:this.props.Primaria});}}};this.verEnvios=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var grado,data,url,respuesta,result,alumnos,totalrevisados;return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:grado=_this.props.gradofijo;if(grado!=\"\"||grado!==undefined){grado=grado.substr(3,6).toUpperCase();}data={id:_this.props.colegio.id,grado:grado};url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/verRespuestas';_context.next=6;return fetch(url,{method:'POST',body:JSON.stringify(data),headers:{'Content-Type':'application/json'},Accept:'application/json'}).catch(error=>{console.log(error);});case 6:respuesta=_context.sent;_context.next=9;return respuesta.json(data);case 9:result=_context.sent;alumnos=[];console.log(alumnos);console.log(result);result[0].forEach(envio=>{if(alumnos.filter(alumno=>alumno==envio.alumno).length==0){alumnos.push(envio.alumno);}});totalrevisados=\"0\";if(result[2][0]!==undefined){totalrevisados=result[2][0].total;}else{totalrevisados=\"0\";}_this.setState({envios:result[0],revisados:result[1],activos:alumnos,totalrevisados:totalrevisados});case 17:case\"end\":return _context.stop();}},_callee);}));this.enviarVista=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(objectid,valor){var data,url,respuesta,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:data={id:objectid,valor:valor};url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/guardarVista';_context2.next=4;return fetch(url,{method:'POST',body:JSON.stringify(data),headers:{'Content-Type':'application/json'},Accept:'application/json'}).catch(error=>{console.log(error);});case 4:respuesta=_context2.sent;_context2.next=7;return respuesta.json();case 7:result=_context2.sent;case 8:case\"end\":return _context2.stop();}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();this.enviarObs=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(objectid,obs){var data,url,respuesta,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:data={id:objectid,observacion:obs};url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/guardarObs';_context3.next=4;return fetch(url,{method:'POST',body:JSON.stringify(data),headers:{'Content-Type':'application/json'},Accept:'application/json'}).catch(error=>{console.log(error);});case 4:respuesta=_context3.sent;_context3.next=7;return respuesta.json();case 7:result=_context3.sent;_this.setState({modal:null,obs:null});case 9:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();this.ponerModal=tarea=>{this.setState({modal:/*#__PURE__*/React.createElement(ReactBSAlert,{style:{display:\"block\",marginTop:\"-100px\"},onConfirm:()=>this.setState({modal:null}),onCancel:()=>this.setState({modal:null}),confirmBtnBsStyle:\"info\",btnSize:\"\",title:/*#__PURE__*/React.createElement(\"p\",null,\"Feedback al Alumno\")},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"warning\",outline:true,onClick:()=>this.enviarVista(tarea,\"1\")},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check\"}))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"info\",outline:true,onClick:()=>this.enviarVista(tarea,\"2\")},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus\"}))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"success\",outline:true,onClick:()=>this.enviarVista(tarea,\"3\")},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-heart\"})))))});};this.ponerModalconCaja=tarea=>{this.setState({modal:/*#__PURE__*/React.createElement(ReactBSAlert,{style:{display:\"block\",marginTop:\"-100px\"},onConfirm:()=>this.enviarObs(tarea,this.state.obs),onCancel:()=>this.setState({modal:null}),confirmBtnBsStyle:\"info\",btnSize:\"\",title:/*#__PURE__*/React.createElement(\"b\",null,\"Observacion al Alumno\")},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Input,{placeholder:\"\",type:\"text\",value:this.state.obs,onChange:texto=>this.setState({obs:texto.target.value})})))});};this.state={singleSelect:null,alumnos:[],grados:[],envios:[],modal:null,obs:null,sinenvio:null,activos:[],revisados:[],totalrevisados:0,parabuscar:null,asignatura_tareas_activas:{value:null,label:null},materias_tareas_activas:null,data:[]};}componentDidMount(){var _this2=this;return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_this2.props.verColegio();if(!_this2.props.colegio.id){_this2.props.history.push(\"/auth/login\");}_context4.next=4;return _this2.props.verAlumnos(_this2.props.colegio.id,_this2.props.gradofijo);case 4:_context4.next=6;return _this2.verEnvios();case 6:_this2.setState({sinenvio:_this2.props.alumnos.length-_this2.state.activos.length});case 7:case\"end\":return _context4.stop();}},_callee4);}))();}render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\",xs:\"5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon-big text-center icon-warning\"},/*#__PURE__*/React.createElement(\"i\",{className:\"nc-icon nc-send\"}))),/*#__PURE__*/React.createElement(Col,{md:\"8\",xs:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"numbers\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Tareas por Revisar\"),/*#__PURE__*/React.createElement(CardTitle,{tag:\"p\"},this.state.envios.filter(envios=>envios.estatus==\"1\").length),/*#__PURE__*/React.createElement(\"p\",null))))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"stats\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-refresh\"}))))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\",xs:\"5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon-big text-center icon-warning\"},/*#__PURE__*/React.createElement(\"i\",{className:\"nc-icon nc-spaceship text-success\"}))),/*#__PURE__*/React.createElement(Col,{md:\"8\",xs:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"numbers\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Tareas Revisadas\"),/*#__PURE__*/React.createElement(CardTitle,{tag:\"p\"},this.state.totalrevisados),/*#__PURE__*/React.createElement(\"p\",null))))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"stats\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-calendar-o\"}))))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\",xs:\"5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon-big text-center icon-warning\"},/*#__PURE__*/React.createElement(\"i\",{className:\"nc-icon nc-ruler-pencil text-danger\"}))),/*#__PURE__*/React.createElement(Col,{md:\"8\",xs:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"numbers\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Alumnos Activos\"),/*#__PURE__*/React.createElement(CardTitle,{tag:\"p\"},this.state.activos.length),/*#__PURE__*/React.createElement(\"p\",null))))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"stats\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-clock-o\"}),\"Inscritos: \",this.props.alumnos.length)))),/*#__PURE__*/React.createElement(Col,{lg:\"3\",md:\"6\",sm:\"6\"},/*#__PURE__*/React.createElement(Card,{className:\"card-stats\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\",xs:\"5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon-big text-center icon-warning\"},/*#__PURE__*/React.createElement(\"i\",{className:\"nc-icon nc-alert-circle-i text-primary\"}))),/*#__PURE__*/React.createElement(Col,{md:\"8\",xs:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"numbers\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Alumnos Inactivos\"),/*#__PURE__*/React.createElement(CardTitle,{tag:\"p\"},this.state.sinenvio),/*#__PURE__*/React.createElement(\"p\",null))))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"stats text-danger\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-refresh\"}),(this.state.sinenvio/this.props.alumnos.length*100).toFixed(0),\" % de Inactividad\"))))),/*#__PURE__*/React.createElement(Row,null,this.state.modal,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(CardTitle,{tag:\"h4\"},\"Tareas por revisar\"),/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Resumen\")),/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(Select,{className:\"react-select primary\",classNamePrefix:\"react-select\",name:\"parabuscar\",value:this.state.parabuscar,onChange:value=>{this.verEnvios(this.props.colegio.id,value,null);this.setState({parabuscar:value});},options:this.props.Grado,placeholder:\"Seleccion el Grado o a\\xF1o\"}),/*#__PURE__*/React.createElement(Button,{onClick:this.handleRefresh,className:\"btn-round btn-icon\",className:\"btn-link \",color:\"info\"},/*#__PURE__*/React.createElement(\"i\",{className:\"nc-icon nc-refresh-69\"}),\" Refrescar\")))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Table,{responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Grado\"),/*#__PURE__*/React.createElement(\"th\",null,\"Area\"),/*#__PURE__*/React.createElement(\"th\",null,\"Alumno\"),/*#__PURE__*/React.createElement(\"th\",null,\"Fecha\"),/*#__PURE__*/React.createElement(\"th\",null,\"Comentario del Alumno\"),/*#__PURE__*/React.createElement(\"th\",null,\"Tarea\"),/*#__PURE__*/React.createElement(\"th\",null,\"Visto\"),/*#__PURE__*/React.createElement(\"th\",null,\"Observacion al Alumno\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.envios.filter(tarea=>tarea.estatus==\"1\").map(tarea=>/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,tarea.grado),/*#__PURE__*/React.createElement(\"td\",null,tarea.materia),/*#__PURE__*/React.createElement(\"td\",null,tarea.alumno),/*#__PURE__*/React.createElement(\"td\",null,tarea.fecha),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"b\",{class:\"text-danger\"},tarea.mensaje)),/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"primary\",outline:true,href:tarea.direccion,target:\"_blank\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-download\"}))):null),tarea.estatus==\"1\"?/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"danger\",outline:true,onClick:()=>this.ponerModal(tarea._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-eye\"}))):null):/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"success\",outline:true,onClick:()=>this.ponerModal(tarea._id)},tarea.vista==\"1\"?/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check\"}):tarea.vista==\"2\"?/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-heart\"}))):null),/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"warning\",outline:true,onClick:()=>this.ponerModalconCaja(tarea._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-send\"})),\"  \",tarea.observacion):null)))))))))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(CardTitle,{tag:\"h4\"},\"Tareas Vistas\"),/*#__PURE__*/React.createElement(\"p\",{className:\"card-category\"},\"Utimas 50\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Table,{responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Grado\"),/*#__PURE__*/React.createElement(\"th\",null,\"Alumno\"),/*#__PURE__*/React.createElement(\"th\",null,\"Comentario del Alumno\"),/*#__PURE__*/React.createElement(\"th\",null,\"Tarea\"),/*#__PURE__*/React.createElement(\"th\",null,\"Visto\"),/*#__PURE__*/React.createElement(\"th\",null,\"Observacion al Alumno\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.revisados.filter(tarea=>tarea.estatus==\"2\").map(tarea=>/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,tarea.grado),/*#__PURE__*/React.createElement(\"td\",null,tarea.alumno),/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"primary\",outline:true,href:tarea.direccion,target:\"_blank\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-download\"}))):null),tarea.estatus==\"1\"?/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"danger\",outline:true,onClick:()=>this.ponerModal(tarea._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-eye\"}))):null):/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"success\",outline:true,onClick:()=>this.ponerModal(tarea._id)},tarea.vista==\"1\"?/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check\"}):tarea.vista==\"2\"?/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-plus\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-heart\"}))):null),/*#__PURE__*/React.createElement(\"td\",{className:\"td-actions text-left\"},tarea.direccion?/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-footer\"},/*#__PURE__*/React.createElement(Button,{className:\"btn-round\",color:\"warning\",outline:true,onClick:()=>this.ponerModalconCaja(tarea._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-send\"})),\"  \",tarea.observacion):null))))))))))))));}}const mapStateToProps=reducers=>{return reducers.mainReducer;};export default connect(mapStateToProps,mainActions)(Dashboard);","map":{"version":3,"sources":["/Users/macbook/Desktop/a.micole_rebe/src/views/Dashboard.js"],"names":["React","Line","Bar","Doughnut","mainActions","connect","Badge","Button","Card","CardHeader","CardBody","CardFooter","CardTitle","Label","FormGroup","Input","Table","Row","Col","UncontrolledTooltip","ReactBSAlert","Select","ReactTable","Dashboard","Component","constructor","props","handleRefresh","verEnvios","console","log","ponerGrados","setGrado_tareas_activas","value","undefined","setState","asignatura_tareas_activas","materias_tareas_activas","Secundaria","Primaria","grado","gradofijo","substr","toUpperCase","data","id","colegio","url","fetch","method","body","JSON","stringify","headers","Accept","catch","error","respuesta","json","result","alumnos","forEach","envio","filter","alumno","length","push","totalrevisados","total","envios","revisados","activos","enviarVista","objectid","valor","enviarObs","obs","observacion","modal","ponerModal","tarea","display","marginTop","ponerModalconCaja","state","texto","target","singleSelect","grados","sinenvio","parabuscar","label","componentDidMount","verColegio","history","verAlumnos","render","estatus","toFixed","Grado","map","materia","fecha","mensaje","direccion","_id","vista","mapStateToProps","reducers","mainReducer"],"mappings":"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","sourcesContent":["import React from \"react\";\n// react plugin used to create charts\nimport { Line, Bar, Doughnut } from \"react-chartjs-2\";\nimport * as mainActions from \"../actions/mainActions\";\nimport { connect } from 'react-redux';\n\n// reactstrap components\nimport {\n  Badge,\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  Label,\n  FormGroup,\n  Input,\n  Table,\n  Row,\n  Col,\n  UncontrolledTooltip,\n} from \"reactstrap\";\nimport ReactBSAlert from \"react-bootstrap-sweetalert\";\nimport Select from \"react-select\";\nimport ReactTable from \"components/ReactTable/ReactTable.js\";\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      singleSelect: null,\n      alumnos: [],\n      grados:[],\n      envios:[],\n      modal:null,\n      obs:null,\n      sinenvio:null,\n      activos:[],\n      revisados:[],\n      totalrevisados:0,\n      parabuscar:null,\n      asignatura_tareas_activas:{\n        value:null,\n        label:null\n      },\n      materias_tareas_activas:null,\n      data: [],\n    };\n  }\n\n  handleRefresh = () => {\n    // by calling this method react re-renders the component\n    this.verEnvios();\n    console.log(\"Pagina Refrescada\")\n  };\n\n  ponerGrados = () =>{\n    //this.setState({grados:this.props.grados});\n  }\n\n  setGrado_tareas_activas = (value) => {\n    if(value!=undefined){\n      this.setState({ asignatura_tareas_activas: value })\n      if(value.value>6){\n        this.setState({materias_tareas_activas:this.props.Secundaria})\n      }else{\n        this.setState({materias_tareas_activas:this.props.Primaria})\n      }\n    }\n  }\n\n  async componentDidMount() {\n    this.props.verColegio()\n    if(!this.props.colegio.id){\n      this.props.history.push(\"/auth/login\");\n    }\n    await this.props.verAlumnos(this.props.colegio.id, this.props.gradofijo);\n    await this.verEnvios();\n    this.setState({sinenvio:this.props.alumnos.length-this.state.activos.length})\n  }\n\n  verEnvios = async () => {\n    let grado = this.props.gradofijo;\n    if(grado!=\"\" || grado!==undefined){\n      grado=grado.substr(3,6).toUpperCase();\n    }\n    const data = {\n      id:this.props.colegio.id,\n      grado: grado\n    };\n    let url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/verRespuestas';\n    let respuesta = await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers:{\n            'Content-Type': 'application/json'\n        },\n        Accept: 'application/json',\n    })\n    .catch(error => {\n        console.log(error);\n    });\n    let result = await respuesta.json(data);\n    let alumnos=[];\n    console.log(alumnos)\n    console.log(result)\n    result[0].forEach(envio => {\n      if(alumnos.filter(alumno=>alumno==envio.alumno).length==0){\n        alumnos.push(envio.alumno)\n      }\n    });\n    let totalrevisados = \"0\";\n    if(result[2][0]!==undefined){\n      totalrevisados = result[2][0].total;\n    }else{\n      totalrevisados = \"0\";\n    }\n    this.setState({envios:result[0], revisados:result[1],\n      activos: alumnos, totalrevisados:totalrevisados\n    });\n  }\n\n  enviarVista = async (objectid, valor) =>{\n    const data = {\n      id:objectid,\n      valor: valor\n    };\n    let url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/guardarVista';\n    let respuesta = await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers:{\n            'Content-Type': 'application/json'\n        },\n        Accept: 'application/json',\n    })\n    .catch(error => {\n        console.log(error);\n    });\n    let result = await respuesta.json();\n  }\n\n  enviarObs = async (objectid, obs) =>{\n    const data = {\n      id:objectid,\n      observacion: obs\n    };\n    let url='https://webhooks.mongodb-realm.com/api/client/v2.0/app/aprendemicolegio-kmnsj/service/masterside/incoming_webhook/guardarObs';\n    let respuesta = await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers:{\n            'Content-Type': 'application/json'\n        },\n        Accept: 'application/json',\n    })\n    .catch(error => {\n        console.log(error);\n    });\n    let result = await respuesta.json();\n    this.setState({modal:null, obs:null});\n  }\n\n  ponerModal = (tarea) => {\n    this.setState({\n      modal: (\n        <ReactBSAlert\n          style={{ display: \"block\", marginTop: \"-100px\" }}\n          onConfirm={() => this.setState({modal:null})}\n          onCancel={() => this.setState({modal:null})}\n          confirmBtnBsStyle=\"info\"\n          btnSize=\"\"\n          title={\n            <p>\n              Feedback al Alumno\n            </p>\n          }\n          >\n            <Row>\n              <Col md={4}>\n              <Button className=\"btn-round\"\n                color=\"warning\"\n                outline\n                onClick={()=>this.enviarVista(tarea,\"1\")}\n              >\n                <i className=\"fa fa-check\" />\n              </Button>\n            </Col>\n            <Col md={4}>\n              <Button className=\"btn-round\"\n                color=\"info\"\n                outline\n                onClick={()=>this.enviarVista(tarea,\"2\")}\n              >\n                <i className=\"fa fa-plus\" />\n              </Button>\n            </Col>\n            <Col md={4}>\n              <Button className=\"btn-round\"\n                color=\"success\"\n                outline\n                onClick={()=>this.enviarVista(tarea,\"3\")}\n              >\n                <i className=\"fa fa-heart\" />\n              </Button>\n            </Col>\n          </Row>\n        </ReactBSAlert>\n      ),\n    });\n  }\n\n  ponerModalconCaja = (tarea) => {\n    this.setState({\n      modal: (\n        <ReactBSAlert\n          style={{ display: \"block\", marginTop: \"-100px\" }}\n          onConfirm={() => this.enviarObs(tarea, this.state.obs)}\n          onCancel={() => this.setState({modal:null})}\n          confirmBtnBsStyle=\"info\"\n          btnSize=\"\"\n          title={\n              <b>Observacion al Alumno</b>\n          }\n          >\n            <FormGroup>\n              <Input placeholder=\"\"\n                type=\"text\"\n                value={this.state.obs}\n                onChange={(texto) =>\n                    this.setState({ obs:texto.target.value })\n                  }\n                />\n            </FormGroup>\n        </ReactBSAlert>\n      )\n    });\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"content\">\n          <Row>\n            <Col lg=\"3\" md=\"6\" sm=\"6\">\n              <Card className=\"card-stats\">\n                <CardBody>\n                  <Row>\n                    <Col md=\"4\" xs=\"5\">\n                      <div className=\"icon-big text-center icon-warning\">\n                        <i className=\"nc-icon nc-send\" />\n                      </div>\n                    </Col>\n                    <Col md=\"8\" xs=\"7\">\n                      <div className=\"numbers\">\n                        <p className=\"card-category\">Tareas por Revisar</p>\n                        <CardTitle tag=\"p\">{this.state.envios.filter(envios=>envios.estatus==\"1\").length}</CardTitle>\n                        <p />\n                      </div>\n                    </Col>\n                  </Row>\n                </CardBody>\n                <CardFooter>\n                  <hr />\n                  <div className=\"stats\">\n                    <i className=\"fa fa-refresh\" />\n                  </div>\n                </CardFooter>\n              </Card>\n            </Col>\n            <Col lg=\"3\" md=\"6\" sm=\"6\">\n              <Card className=\"card-stats\">\n                <CardBody>\n                  <Row>\n                    <Col md=\"4\" xs=\"5\">\n                      <div className=\"icon-big text-center icon-warning\">\n                        <i className=\"nc-icon nc-spaceship text-success\" />\n                      </div>\n                    </Col>\n                    <Col md=\"8\" xs=\"7\">\n                      <div className=\"numbers\">\n                      <p className=\"card-category\">Tareas Revisadas</p>\n                        <CardTitle tag=\"p\">{this.state.totalrevisados}</CardTitle>\n                        <p />\n                      </div>\n                    </Col>\n                  </Row>\n                </CardBody>\n                <CardFooter>\n                  <hr />\n                  <div className=\"stats\">\n                    <i className=\"fa fa-calendar-o\" />\n                  </div>\n                </CardFooter>\n              </Card>\n            </Col>\n            <Col lg=\"3\" md=\"6\" sm=\"6\">\n              <Card className=\"card-stats\">\n                <CardBody>\n                  <Row>\n                    <Col md=\"4\" xs=\"5\">\n                      <div className=\"icon-big text-center icon-warning\">\n                        <i className=\"nc-icon nc-ruler-pencil text-danger\" />\n                      </div>\n                    </Col>\n                    <Col md=\"8\" xs=\"7\">\n                      <div className=\"numbers\">\n                        <p className=\"card-category\">Alumnos Activos</p>\n                        <CardTitle tag=\"p\">{this.state.activos.length}</CardTitle>\n                        <p />\n                      </div>\n                    </Col>\n                  </Row>\n                </CardBody>\n                <CardFooter>\n                  <hr />\n                  <div className=\"stats\">\n                    <i className=\"fa fa-clock-o\" />\n                    Inscritos: {this.props.alumnos.length}\n                  </div>\n                </CardFooter>\n              </Card>\n            </Col>\n            <Col lg=\"3\" md=\"6\" sm=\"6\">\n              <Card className=\"card-stats\">\n                <CardBody>\n                  <Row>\n                    <Col md=\"4\" xs=\"5\">\n                      <div className=\"icon-big text-center icon-warning\">\n                        <i className=\"nc-icon nc-alert-circle-i text-primary\" />\n                      </div>\n                    </Col>\n                    <Col md=\"8\" xs=\"7\">\n                      <div className=\"numbers\">\n                        <p className=\"card-category\">Alumnos Inactivos</p>\n                        <CardTitle tag=\"p\">{this.state.sinenvio}</CardTitle>\n                        <p />\n                      </div>\n                    </Col>\n                  </Row>\n                </CardBody>\n                <CardFooter>\n                  <hr />\n                  <div className=\"stats text-danger\">\n                    <i className=\"fa fa-refresh\" />\n                    {((this.state.sinenvio/this.props.alumnos.length)*100).toFixed(0)} % de Inactividad\n                  </div>\n                </CardFooter>\n              </Card>\n            </Col>\n          </Row>\n          <Row>\n            {this.state.modal}\n            <Col md=\"12\">\n              <Card>\n                <CardHeader>\n                  <Row>\n                    <Col md=\"6\">\n                      <CardTitle tag=\"h4\">\n                        {/* <Button className=\"btn-round btn-icon\" className=\"btn-link \" color=\"info\">\n                          <i className=\"nc-icon nc-refresh-69\" />\n                        </Button> */}\n                        Tareas por revisar\n                      </CardTitle>\n                      <p className=\"card-category\">\n                        Resumen\n                      </p>\n                    </Col>\n                    <Col md=\"6\">\n                      <Select\n                        className=\"react-select primary\"\n                        classNamePrefix=\"react-select\"\n                        name=\"parabuscar\"\n                        value={this.state.parabuscar}\n                        onChange={(value) => {\n                          this.verEnvios(this.props.colegio.id,value,null);\n                          this.setState({parabuscar: value });\n                        }}\n                        options={this.props.Grado}\n                        placeholder=\"Seleccion el Grado o aÃ±o\"\n                      />\n                      <Button\n                        onClick={this.handleRefresh}\n                        className=\"btn-round btn-icon\"\n                        className=\"btn-link \"\n                        color=\"info\"\n                      >\n                        <i className=\"nc-icon nc-refresh-69\" /> Refrescar\n                      </Button>\n                    </Col>\n                  </Row>\n                </CardHeader>\n                <CardBody>\n                  <Row>\n                    <Col md=\"12\">\n                      <Table responsive>\n                      <thead>\n                        <tr>\n                          <th>Grado</th>\n                          <th>Area</th>\n                          <th>Alumno</th>\n                          <th>Fecha</th>\n                          <th>Comentario del Alumno</th>\n                          <th>Tarea</th>\n                          <th>Visto</th>\n                          <th>Observacion al Alumno</th>\n                        </tr>\n                      </thead>\n                        <tbody>\n                          {this.state.envios.filter(tarea=>tarea.estatus==\"1\").map(tarea=>(\n                            <>\n                              <tr>\n                                <td>{tarea.grado}</td>\n                                <td>{tarea.materia}</td>\n                                <td>{tarea.alumno}</td>\n                                <td>{tarea.fecha}</td>\n                                <td><b class=\"text-danger\">{tarea.mensaje}</b></td>\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"primary\"\n                                        outline\n                                        href={tarea.direccion}\n                                            target=\"_blank\"\n                                      >\n                                        <i className=\"fa fa-download\" />\n                                      </Button>\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                                {tarea.estatus==\"1\" ? (\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"danger\"\n                                        outline\n                                        onClick={()=>this.ponerModal(tarea._id)}\n                                      >\n                                        <i className=\"fa fa-eye\" />\n                                      </Button>\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                                ) : (\n                                <td className=\"td-actions text-left\">\n                                  {tarea.direccion ? (\n                                    <div className=\"timeline-footer\">\n                                    <Button className=\"btn-round\"\n                                      color=\"success\"\n                                      outline\n                                      onClick={()=>this.ponerModal(tarea._id)}\n                                    >\n                                      {tarea.vista==\"1\" ? (\n                                        <i className=\"fa fa-check\" />\n                                      ):(\n                                        tarea.vista==\"2\" ? (\n                                          <i className=\"fa fa-plus\" />\n                                        ) : (\n                                          <i className=\"fa fa-heart\" />\n                                        )\n                                      )}\n                                    </Button>\n                                    </div>\n                                  ) : (null)}\n                                </td>\n                                )}\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"warning\"\n                                        outline\n                                        onClick={()=>this.ponerModalconCaja(tarea._id)}\n                                      >\n                                        <i className=\"fa fa-send\" />\n                                      </Button>\n                                      {\"  \"}{tarea.observacion}\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                              </tr>\n                            </>\n                          ))}\n                        </tbody>\n                      </Table>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n          <Row>\n            <Col md=\"12\">\n              <Card>\n                <CardHeader>\n                  <CardTitle tag=\"h4\">Tareas Vistas</CardTitle>\n                  <p className=\"card-category\">\n                    Utimas 50\n                  </p>\n                </CardHeader>\n                <CardBody>\n                  <Row>\n                    <Col md=\"12\">\n                      <Table responsive>\n                      <thead>\n                        <tr>\n                          <th>Grado</th>\n                          <th>Alumno</th>\n                          <th>Comentario del Alumno</th>\n                          <th>Tarea</th>\n                          <th>Visto</th>\n                          <th>Observacion al Alumno</th>\n                        </tr>\n                      </thead>\n                        <tbody>\n                          {this.state.revisados.filter(tarea=>tarea.estatus==\"2\").map(tarea=>(\n                            <>\n                              <tr>\n                                <td>{tarea.grado}</td>\n                                <td>{tarea.alumno}</td>\n                                <td></td>\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"primary\"\n                                        outline\n                                        href={tarea.direccion}\n                                            target=\"_blank\"\n                                      >\n                                        <i className=\"fa fa-download\" />\n                                      </Button>\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                                {tarea.estatus==\"1\" ? (\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"danger\"\n                                        outline\n                                        onClick={()=>this.ponerModal(tarea._id)}\n                                      >\n                                        <i className=\"fa fa-eye\" />\n                                      </Button>\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                                ) : (\n                                <td className=\"td-actions text-left\">\n                                  {tarea.direccion ? (\n                                    <div className=\"timeline-footer\">\n                                    <Button className=\"btn-round\"\n                                      color=\"success\"\n                                      outline\n                                      onClick={()=>this.ponerModal(tarea._id)}\n                                    >\n                                      {tarea.vista==\"1\" ? (\n                                        <i className=\"fa fa-check\" />\n                                      ):(\n                                        tarea.vista==\"2\" ? (\n                                          <i className=\"fa fa-plus\" />\n                                        ) : (\n                                          <i className=\"fa fa-heart\" />\n                                        )\n                                      )}\n                                    </Button>\n                                    </div>\n                                  ) : (null)}\n                                </td>\n                                )}\n                                <td className=\"td-actions text-left\">\n                                    {tarea.direccion ? (\n                                      <div className=\"timeline-footer\">\n                                      <Button className=\"btn-round\"\n                                        color=\"warning\"\n                                        outline\n                                        onClick={()=>this.ponerModalconCaja(tarea._id)}\n                                      >\n                                        <i className=\"fa fa-send\" />\n                                      </Button>\n                                      {\"  \"}{tarea.observacion}\n                                      </div>\n                                    ) : (null)}\n                                </td>\n                              </tr>\n                            </>\n                          ))}\n                        </tbody>\n                      </Table>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (reducers) => {\n  return reducers.mainReducer;\n}\n\nexport default connect(mapStateToProps, mainActions )(Dashboard);\n"]},"metadata":{},"sourceType":"module"}